<!doctype html><html lang="en">
<head><meta charset="UTF-8">
<link rel="STYLESHEET" href="../main.css" type="text/css">
<title>DENY User privs | SQL Server | SS64.com</title>
</head><body><h1>DENY to user/role </h1>
<p>Deny permissions to a  database user, database role, or application role.</p>
<pre>Syntax
      DENY <i>permission</i>  [ ,...<i>n</i> ] 
         TO <i>grantee_principal </i>[,...n ]
            [CASCADE]
               [AS <i>grantor_principal</i>]

      DENY <i>permission</i> | ALL [ PRIVILEGES ] [,...<i>n</i> ] 
         [ON USER::<i>user</i> | ON ROLE::<i>role</i> | ON APPLICATION ROLE::<i>role</i>]
            TO <i>principal</i> [ ,...<i>n</i> ] [CASCADE]
               [AS <i>principal</i> ]

Key:
   principal   one of: 
                user /role /application role
                user mapped to a Windows login/group/certificate
                user mapped to an asymmetric key
                user not mapped to a server principal.

   grantee_principal/grantor_principal
                SQL Server login or SQL Login mapped to a Windows login/group/certificate/asymmetric_key
                The grantor_principal for an Endpoint must be a SQL Server login

   cascade      Also DENY from other principals that have been
                granted or denied by this principal.

   permission
                ALL (= BACKUP DATABASE, BACKUP LOG, CREATE DATABASE, CREATE DEFAULT,
                       CREATE FUNCTION, CREATE PROCEDURE, CREATE RULE, CREATE TABLE, CREATE VIEW)
                ALTER
                ALTER ANY APPLICATION ROLE
                ALTER ANY ASSEMBLY
                CREATE AGGREGATE
                CREATE ASSEMBLY
                UNSAFE ASSEMBLY
                EXTERNAL ACCESS ASSEMBLY
                CREATE ASYMMETRIC KEY
                ALTER ANY ASYMMETRIC KEY
                AUTHENTICATE
                AUTHENTICATE SERVER	
                BACKUP DATABASE
                BACKUP LOG
                ADMINISTER BULK OPERATIONS	
                ALTER ANY CONNECTION	
                ALTER ANY CREDENTIAL	
                CHECKPOINT
                CONNECT
                CONNECT REPLICATION
                CONTROL
                CREATE CERTIFICATE
                ALTER ANY CERTIFICATE
                CREATE CONTRACT
                ALTER ANY CONTRACT
                VIEW DATABASE STATE
                CREATE DATABASE
                CREATE ANY DATABASE	
                ALTER ANY DATABASE
                VIEW ANY DATABASE
                CREATE DDL EVENT NOTIFICATION
                CREATE DATABASE DDL EVENT NOTIFICATION
                CREATE TRACE EVENT NOTIFICATION
                ALTER ANY DATABASE EVENT NOTIFICATION
                ALTER ANY DATASPACE
                CREATE DEFAULT
                VIEW DEFINITION
                VIEW ANY DEFINITION
                DELETE
                CREATE ENDPOINT
                ALTER ANY ENDPOINT
                ALTER ANY EVENT NOTIFICATION	
                EXECUTE
                CREATE FULLTEXT CATALOG
                ALTER ANY FULLTEXT CATALOG
                CREATE FUNCTION
                INSERT
                ALTER ANY LINKED SERVER	
                ALTER ANY LOGIN
                CREATE MESSAGE TYPE
                ALTER ANY MESSAGE TYPE
                TAKE OWNERSHIP
                CREATE PROCEDURE
                CREATE QUEUE
                SUBSCRIBE QUERY NOTIFICATIONS
                ALTER RESOURCES	
                REFERENCES
                CREATE REMOTE SERVICE BINDING
                ALTER ANY REMOTE SERVICE BINDING
                CREATE ROLE
                ALTER ANY ROLE
                CREATE ROUTE
                ALTER ANY ROUTE
                CREATE RULE
                CREATE SCHEMA
                ALTER ANY SCHEMA
                SELECT
                ALTER SERVER STATE
                VIEW SERVER STATE	
                ALTER SETTINGS
                CREATE SERVICE
                ALTER ANY SERVICE
                SHOWPLAN
                SHUTDOWN
                CONNECT SQL
                CREATE SYMMETRIC KEY
                ALTER ANY SYMMETRIC KEY
                CREATE SYNONYM
                CREATE TABLE
                ALTER TRACE
                ALTER ANY DATABASE DDL TRIGGER
                CREATE TYPE
                ALTER ANY USER
                UPDATE
                CREATE VIEW
                CREATE XML SCHEMA COLLECTION</pre>
<p>When denying the cascade of permission rights from one  principle to another principle (DENY <i>permission </i>ON <i>user/role</i> TO <i>user/role</i>) 
  then 
the only valid permissions to deny are:</p>
<pre>   CONTROL, IMPERSONATE, TAKE OWNERSHIP, ALTER, VIEW DEFINITION


      For user: CONTROL/IMPERSONATE/ALTER/VIEW DEFINITION
      For role: CONTROL/TAKE OWNERSHIP/ALTER/VIEW DEFINITION
      For app. role:  CONTROL/ALTER/VIEW DEFINITION</pre>
<p>Examples</p>
<pre>USE MyDb;<br>DENY CONTROL ON USER::User78 TO JohnDoe;
GO

DENY VIEW DEFINITION ON ROLE::SupervisorRole<br>  TO User64 WITH GRANT OPTION;
GO

DENY IMPERSONATE ON USER::User78 TO SupervisorRole;<br>GO  </pre>
<p class="quote"><i>&quot;I had one guy at a gas station in New York say to me, 'Hey, you look
  like Hugh Grant. No offense'&quot; ~ Hugh Grant, on being recognized in
public</i></p>
<p><b>Related commands:</b></p>
<p><a href="revoke_user.html">  REVOKE User/Role</a> permissions<br>
  <a href="grant.html">GRANT Object</a> permissions<br>
  sys.database_permissions<br>
  sys.database_principals  <br>
Equivalent Oracle command: <a href="../ora/grant.html">GRANT</a></p></body>
</html>
